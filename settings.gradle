include 'core-api'
include 'core-event'
include 'core-schema'
include 'core-repo'
include 'core-security'
include 'core-image'
include 'core-export'
include 'core-mail'
include 'core-impl'
include 'core-itest'

include 'script-api'
include 'script-impl'

include 'web-api'
include 'web-impl'
include 'web-jaxrs'
include 'web-vhost'

include 'portal-api'
include 'portal-impl'

include 'admin-api'
include 'admin-impl'
include 'admin-event'
include 'admin-ui'

include 'itest-core'

include 'upgrade'
include 'toolbox'

include 'launcher'
include 'distro'

include 'testing'
include 'gradle-plugin'

include 'lib-content'
include 'lib-i18n'
include 'lib-portal'
include 'lib-mustache'
include 'lib-xslt'
include 'lib-thymeleaf'
include 'lib-mail'
include 'lib-auth'

include 'repack-jparsec'
include 'repack-attoparser'
include 'repack-resteasy'
include 'repack-jhlabs-filters'
include 'repack-elasticsearch'

rootProject.name = 'xp'

configureProjects( rootProject )

def configureProjects( root )
{
    root.children.each { p ->
        configureProject( p )
        configureProjects( p )
    }
}

def configureProject( p )
{
    String dirName = p.path.substring( 1 ).replace( ':', '/' )
    p.projectDir = new File( (File) settingsDir, "modules/${dirName}" )
    assert p.projectDir.isDirectory()
    assert p.buildFile.isFile()
}
