node {
    download = true
    distBaseUrl = null
    version = '16.15.0'
    workDir = file("${rootProject.projectDir}/.gradle/nodejs")
}

task lint( type: NpmTask, dependsOn: npmInstall ) {
    description = 'Lint TS, JS, and JSON'
    args = [ 'run', 'lint:quiet' ]
    outputs.upToDateWhen { false }
}

task typescript( type: NpmTask, dependsOn: npmInstall ) {
    description = 'Create definitions and JS files from TS'
    args = [ 'run', 'build' ]
}

check {
    dependsOn lint
}

test {
    dependsOn typescript
}

jar {
    exclude '**/*.ts'
    dependsOn typescript
}
