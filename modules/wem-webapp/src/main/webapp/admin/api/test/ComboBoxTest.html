<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ComboBox.ts manual test page</title>

    <link rel="stylesheet/less" type="text/css" href="../../resources/less/styles.less"/>
    <link rel="stylesheet" type="text/css" href="../../resources/lib/slickgrid/slick.grid.css"/>

    <script type="text/javascript" src="../../resources/js/less.js"></script>
    <script type="text/javascript" src="../../../admin/resources/lib/ext/ext-all-debug.js"></script>
    <script type="text/javascript" src="../../../admin/resources/lib/plupload/js/plupload.full.js"></script>
    <script type="text/javascript" src="../../resources/lib/jquery-2.0.2.js"></script>
    <!--Slick dependencies -->
    <script type="text/javascript" src="../../resources/lib/slickgrid/lib/jquery.event.drag-2.2.js"></script>
    <script type="text/javascript" src="../../resources/lib/slickgrid/lib/jquery.event.drop-2.2.js"></script>
    <script type="text/javascript" src="../../resources/lib/slickgrid/slick.core.js"></script>
    <script type="text/javascript" src="../../resources/lib/slickgrid/slick.grid.js"></script>
    <script type="text/javascript" src="../../resources/lib/slickgrid/slick.dataview.js"></script>
    <script type="text/javascript" src="../../resources/lib/slickgrid/slick.rowselectionmodel.js"></script>
    <script type="text/javascript">
        $.noConflict();
    </script>

    <style>
        body {
            padding: 50px 0 0 50px;
        }

        .combobox.iconed input {
            height: 37px;
            padding: 4px 4px 4px 50px;
        }

        .combobox.iconed .slick-cell {
            height: 34px;
            padding: 8px;
            border: none;
        }

        .combobox.iconed .selected-option {
            height: 37px;
            padding: 3px 0;
            border: none;
        }
    </style>
</head>
<body>

    <div id="example"></div>

<script type="text/javascript" src="../js/api.js"></script>
<script>

    var createData = function(value) {
        var data = [];
        for (var i = 0; i < 15 ; i++) {
            data.push({value: value+i, displayValue: {iconUrl:"", title:"title "+i+value, description:"description"+i}})
        }
        return data;
    }

    var config = {
        optionFormatter: function (row, cell, value, columnDef, dataContext) {
            return '<img src="'+value.iconUrl+'" class="icon"/>' +
                   '<div class="info">' +
                   '<div class="title">'+value.title+'</div>' +
                   '<div class="description">'+value.description+'</div>' +
                   '</div>';
        },
        selectedOptionFormatter: function (value) {
            return '<img src="'+value.iconUrl+'" class="icon"/>' +
                   '<div class="info">' +
                   '<div class="title">'+value.title+'</div>' +
                   '<div class="description">'+value.description+'</div>' +
                   '</div>';
        },
        maximumOccurrences: 3,
        filter: function (item, args) {
            return !args || !args.value || item.displayValue.description.indexOf(args.value) != -1 || item.displayValue.title.indexOf(args.value) != -1;
        }
    }

    var combobox = new api_ui_combobox.ComboBox("name", createData(""), config);

    combobox.addClass("iconed");

    combobox.addListener({
        onInputValueChanged: function (oldValue, newValue, grid) {
            grid.getDataView().setFilterArgs({value: newValue});
            grid.getDataView().refresh();
//            grid.getDataView().setItems(createData(newValue));
        }
    });

    document.getElementById("example").appendChild(combobox.getHTMLElement());
    combobox.init();

    combobox.setValue("3");

</script>

</body>
</html>