<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">

  <reference-list id="dataInitializers" interface="com.enonic.wem.api.initializer.DataInitializer" availability="optional"/>

  <bean id="securityInitializer" class="com.enonic.wem.core.security.SecurityInitializer">
    <property name="securityService" ref="securityService"/>
  </bean>

  <bean id="startupInitializer" class="com.enonic.wem.core.initializer.StartupInitializerImpl" init-method="start">
    <property name="repositoryInitializer" ref="repositoryInitializer"/>
    <property name="initializers" ref="dataInitializers"/>
    <property name="securityInitializer" ref="securityInitializer"/>
    <property name="contentInitializer" ref="contentInitializer"/>
  </bean>

  <service ref="startupInitializer" auto-export="interfaces"/>

  <bean id="contentInitializer" class="com.enonic.wem.core.content.ContentInitializer">
    <property name="nodeService" ref="nodeService"/>
  </bean>

</blueprint>
