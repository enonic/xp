dependencies {
    implementation project( ':web:web-api' )
    implementation project( ':core:core-internal' )
    implementation libs.jetty.server
    implementation libs.jetty.servlet
    implementation libs.jetty.servlets
    implementation libs.jetty.jmx
    implementation libs.jetty.websocket.server
    implementation libs.jetty.websocket.servlet
    implementation ( libs.jetty.websocket.serverimpl) {
        exclude group: 'javax.annotation'
    }
    implementation libs.jakarta.annotation
    implementation libs.metrics.jetty9

    testFixturesApi( project(":web:web-api") )
    testFixturesImplementation libs.junit.jupiter.api
    testFixturesImplementation libs.mockito.core
    testFixturesImplementation libs.jetty.server
    testFixturesImplementation libs.jetty.servlet

    testImplementation( testFixtures( project(":core:core-api") ) )
}

jar {
    bnd( 'Bundle-Name': 'Enonic XP Web - Jetty',
         'Export-Package': 'org.eclipse.jetty.*, javax.servlet.*;-split-package:=merge-first, javax.websocket.*;-split-package:=merge-first',
         'Import-Package': 'com.enonic.xp.security.auth;resolution:=optional,' +
             'com.enonic.xp.security;resolution:=optional,' +
             'com.enonic.xp.data;resolution:=optional,' +
             'com.enonic.xp.support;resolution:=optional,' +
             '*;resolution:=optional',
         'X-Jetty-Version': libs.jetty.server.get().version )
}
