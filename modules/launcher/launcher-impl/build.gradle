import com.enonic.gradle.BuildInfoHelper

def buildInfoProvider = providers.provider {
    BuildInfoHelper.extract( project.rootDir )
}

dependencies {
    implementation( libs.felix.framework ) {
        exclude group: 'org.codehaus.mojo'
    }
    implementation libs.felix.utils

    implementation( libs.felix.log ) {
        exclude group: 'org.osgi'
    }
    implementation libs.logback.classic
    implementation libs.slf4j.api
    implementation libs.slf4j.jultoslf4j

    implementation libs.commons.io
    implementation libs.bytebuddy
}

tasks.named( 'processResources' ) {
    inputs.property( "buildInfo", buildInfoProvider )
    filesMatching( '**/build.properties' ) {
        expand( [info: buildInfoProvider.get()] )
    }
}
