import com.enonic.gradle.BuildInfoHelper

def buildInfoProvider = providers.provider {
    BuildInfoHelper.extract( project.rootDir )
}

tasks.named( 'processResources' ) {
    inputs.property( "buildInfo", buildInfoProvider )
    filesMatching( '**/build.properties' ) {
        expand( [info: buildInfoProvider.get()] )
    }
}